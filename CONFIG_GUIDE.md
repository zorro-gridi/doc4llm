# doc4llm é…ç½®å‚æ•°è¯´æ˜æ–‡æ¡£

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜ `config.json` ä¸­æ‰€æœ‰é…ç½®å‚æ•°çš„ä½œç”¨ã€åº”ç”¨åœºæ™¯å’Œé…ç½®æ–¹æ³•ã€‚

---

## ç›®å½•

- [åŸºç¡€é…ç½®](#åŸºç¡€é…ç½®)
- [åŸŸåä¸URLèŒƒå›´](#åŸŸåä¸urlèŒƒå›´)
- [è¯·æ±‚é…ç½®](#è¯·æ±‚é…ç½®)
- [è¿‡æ»¤è§„åˆ™](#è¿‡æ»¤è§„åˆ™)
- [æ–‡æ¡£çˆ¬å–æ¨¡å¼](#æ–‡æ¡£çˆ¬å–æ¨¡å¼)
- [TOCé€‰æ‹©å™¨è¯¦è§£](#tocé€‰æ‹©å™¨è¯¦è§£)
- [TOC URLè¿‡æ»¤é…ç½®](#toc-urlè¿‡æ»¤é…ç½®)
- [å†…å®¹è¿‡æ»¤é…ç½®](#å†…å®¹è¿‡æ»¤é…ç½®)
- [å·¥å…·é…ç½®](#å·¥å…·é…ç½®)
- [å†…è”æå–ä¼˜åŒ–](#å†…è”æå–ä¼˜åŒ–)

---

## åŸºç¡€é…ç½®

### `start_url`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | å¿…å¡« |
|------|------|--------|------|
| èµ·å§‹URL | string | `null` | å¦ |

**ä½œç”¨**ï¼šæ‰«æçš„èµ·å§‹URLåœ°å€

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"start_url": "https://example.com"
```

**åº”ç”¨åœºæ™¯**ï¼š
- å•URLæ‰«æï¼šæŒ‡å®šè¦æ‰«æçš„ç›®æ ‡ç½‘ç«™
- æ‰¹é‡æ‰«æï¼šé…åˆ `-f` å‚æ•°ä½¿ç”¨æ—¶ï¼Œæ­¤å‚æ•°å¯çœç•¥

---

### `max_workers`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æœ€å¤§çº¿ç¨‹æ•° | int | `30` |

**ä½œç”¨**ï¼šå¹¶å‘çˆ¬å–çš„æœ€å¤§çº¿ç¨‹æ•°é‡

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"max_workers": 50
```

**åº”ç”¨åœºæ™¯**ï¼š
- é«˜æ€§èƒ½æ‰«æï¼šå¯è®¾ç½®ä¸º 50-100
- ä½å¸¦å®½ç¯å¢ƒï¼šè®¾ç½®ä¸º 10-20
- é¿å…è¢«å°ï¼šè®¾ç½®ä¸º 5-10

---

### `delay`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è¯·æ±‚å»¶è¿Ÿï¼ˆç§’ï¼‰ | float | `0.1` |

**ä½œç”¨**ï¼šæ¯ä¸ªè¯·æ±‚ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"delay": 1.0
```

**åº”ç”¨åœºæ™¯**ï¼š
- é¿å…è§¦å‘åçˆ¬ï¼šè®¾ç½®ä¸º 1-3 ç§’
- å¿«é€Ÿæ‰«æï¼šè®¾ç½®ä¸º 0.1-0.5 ç§’
- å‹å¥½çˆ¬å–ï¼šè®¾ç½®ä¸º 2-5 ç§’

---

### `timeout`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰ | int | `20` |

**ä½œç”¨**ï¼šå•ä¸ªHTTPè¯·æ±‚çš„è¶…æ—¶æ—¶é—´

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"timeout": 30
```

**åº”ç”¨åœºæ™¯**ï¼š
- æ…¢é€Ÿç½‘ç«™ï¼šè®¾ç½®ä¸º 30-60 ç§’
- å¿«é€Ÿæ‰«æï¼šè®¾ç½®ä¸º 10-15 ç§’

---

### `max_depth`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æœ€å¤§é€’å½’æ·±åº¦ | int | `5` |

**ä½œç”¨**ï¼šURLé€’å½’çˆ¬å–çš„æœ€å¤§æ·±åº¦

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"max_depth": 3
```

**é€’å½’æ·±åº¦è¡Œä¸ºè¯´æ˜**ï¼š

| max_depth å€¼ | è¡Œä¸º | è¯´æ˜ |
|--------------|------|------|
| `0` | **ä»…çˆ¬å– start_url** | ä¸æå–é¡µé¢ä¸­çš„ä»»ä½•é“¾æ¥ |
| `1` | start_url + æå–é“¾æ¥ | çˆ¬å–èµ·å§‹é¡µå¹¶å‘ç°é“¾æ¥ï¼Œä½†ä¸å¯¹é“¾æ¥ç»§ç»­é€’å½’ |
| `2` | 2å±‚é€’å½’ | start_url â†’ é¡µé¢é“¾æ¥ï¼ˆé€’å½’1å±‚ï¼‰â†’ é“¾æ¥çš„é“¾æ¥ï¼ˆé€’å½’2å±‚ï¼‰ |
| `n` | nå±‚é€’å½’ | ä»¥æ­¤ç±»æ¨ï¼Œæœ€å¤§ `n` å±‚é“¾æ¥æ·±åº¦ |

**æ·±åº¦è®¡æ•°ç¤ºä¾‹**ï¼š

```
max_depth = 0:
  â””â”€ https://example.com/docs/intro       âœ… çˆ¬å–
     â””â”€ https://example.com/docs/guide    âŒ ä¸çˆ¬å–

max_depth = 1:
  â””â”€ https://example.com/docs/intro       âœ… çˆ¬å–
     â””â”€ https://example.com/docs/guide    ğŸ”— å‘ç°ä½†è·³è¿‡ï¼ˆä»…æå–åˆ°CSVï¼‰
        â””â”€ https://example.com/docs/api   âŒ ä¸çˆ¬å–

max_depth = 2:
  â””â”€ https://example.com/docs/intro       âœ… çˆ¬å–
     â””â”€ https://example.com/docs/guide    âœ… çˆ¬å–
        â””â”€ https://example.com/docs/api   ğŸ”— å‘ç°ä½†è·³è¿‡ï¼ˆé€’å½’å·²è¾¾ä¸Šé™ï¼‰
           â””â”€ ...                         âŒ ä¸çˆ¬å–
```

**åº”ç”¨åœºæ™¯**ï¼š
- å•é¡µé¢æ‰«æï¼š`max_depth: 0`
- æµ…å±‚æ‰«æï¼š`max_depth: 2-3`
- æ·±åº¦æ‰«æï¼š`max_depth: 5-10`
- å…¨ç«™æ‰«æï¼š`max_depth: 10+`

---

### `max_urls`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æœ€å¤§URLæ•°é‡ | int | `10000` |

**ä½œç”¨**ï¼šæœ€å¤šæ‰«æçš„URLæ€»æ•°é™åˆ¶

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"max_urls": 5000
```

---

### `smart_concatenation`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ™ºèƒ½URLæ‹¼æ¥ | bool | `true` |

**ä½œç”¨**ï¼šå¯ç”¨æ™ºèƒ½URLæ‹¼æ¥åŠŸèƒ½

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"smart_concatenation": true
```

**åº”ç”¨åœºæ™¯**ï¼š
- ç›¸å¯¹è·¯å¾„å¤„ç†ï¼šè‡ªåŠ¨å¤„ç†ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„çš„æ‹¼æ¥
- URLæ ‡å‡†åŒ–ï¼šè‡ªåŠ¨å¤„ç†URLæœ«å°¾æ–œæ ã€é‡å¤æ–œæ ç­‰é—®é¢˜
- å‚æ•°ä¿ç•™ï¼šä¿ç•™åŸæœ‰URLçš„æŸ¥è¯¢å‚æ•°å’Œé”šç‚¹

---

## åŸŸåä¸URLèŒƒå›´

### `url_scope_mode`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | å¯é€‰å€¼ |
|------|------|--------|--------|
| URLæ‰«æèŒƒå›´æ¨¡å¼ | int | `0` | `0` / `1` / `2` / `3` |

**ä½œç”¨**ï¼šæ§åˆ¶URLæ‰«æçš„èŒƒå›´ç­–ç•¥

**æ¨¡å¼è¯´æ˜**ï¼š

| æ¨¡å¼å€¼ | åç§° | è¡Œä¸ºè¯´æ˜ | åº”ç”¨åœºæ™¯ |
|--------|------|----------|----------|
| `0` | ä¸»åŸŸåæ¨¡å¼ | ä»…æ‰«æç›®æ ‡ä¸»åŸŸåï¼Œå¤–éƒ¨URLè®°å½•åˆ°æ–‡ä»¶ä½†ä¸é€’å½’ | å¸¸è§„æ‰«æ |
| `1` | å¤–éƒ¨ä¸€æ¬¡æ¨¡å¼ | æ‰«æç›®æ ‡åŸŸå + è®¿é—®å¤–éƒ¨é“¾æ¥ä¸€æ¬¡ï¼ˆå¤–éƒ¨åŸŸåä¸é€’å½’ï¼‰ | æ‰©å±•å‘ç° |
| `2` | æ— é™åˆ¶æ¨¡å¼ | æ‰«ææ‰€æœ‰é“¾æ¥ï¼Œä»…å—æ·±åº¦å’ŒURLæ•°é‡é™åˆ¶ | å…¨é¢æ‰«æ |
| `3` | ç™½åå•æ¨¡å¼ | ä»…æ‰«æ `whitelist_domains` ä¸­çš„åŸŸå | ç²¾ç¡®ç›®æ ‡ |

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"url_scope_mode": 0
```

---

### `blacklist_domains`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| é»‘åå•åŸŸå | array | `["www.w3.org", "www.baidu.com", "github.com"]` |

**ä½œç”¨**ï¼šç¦æ­¢æ‰«æçš„åŸŸååˆ—è¡¨

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"blacklist_domains": [
  "www.w3.org",
  "www.baidu.com",
  "github.com",
  "google.com",
  "facebook.com"
]
```

**åº”ç”¨åœºæ™¯**ï¼š
- æ’é™¤å¤§å‹CDNï¼šå¦‚ `google.com`, `facebook.com`
- æ’é™¤å¹¿å‘ŠåŸŸåï¼šå¦‚ `doubleclick.net`
- æ’é™¤ç¤¾äº¤åª’ä½“ï¼šå¦‚ `twitter.com`, `linkedin.com`

---

### `whitelist_domains`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| ç™½åå•åŸŸå | array | `[]` |

**ä½œç”¨**ï¼šé…åˆ `url_scope_mode=3` ä½¿ç”¨ï¼Œä»…æ‰«æç™½åå•ä¸­çš„åŸŸå

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"whitelist_domains": [
  "docs.python.org",
  "api.example.com"
]
```

---

## è¯·æ±‚é…ç½®

### `proxy`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| ä»£ç†åœ°å€ | string | `null` |

**ä½œç”¨**ï¼šHTTP/HTTPSä»£ç†æœåŠ¡å™¨åœ°å€

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"proxy": "http://127.0.0.1:7890"
```

**æ”¯æŒæ ¼å¼**ï¼š
- HTTPä»£ç†ï¼š`http://127.0.0.1:8080`
- SOCKS5ä»£ç†ï¼š`socks5://127.0.0.1:1080`

---

### `headers_path`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| HTTPå¤´æ–‡ä»¶è·¯å¾„ | string | `"headers.json"` |

**ä½œç”¨**ï¼šæŒ‡å®šåŒ…å«HTTPè¯·æ±‚å¤´çš„JSONæ–‡ä»¶è·¯å¾„

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"headers_path": "headers.json"
```

**headers.json æ–‡ä»¶æ ¼å¼**ï¼š
```json
{
  "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
  "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
  "Accept-Language": "zh-CN,zh;q=0.9,en;q=0.8",
  "Authorization": "Bearer your_token_here"
}
```

**åº”ç”¨åœºæ™¯**ï¼š
- æ¨¡æ‹Ÿæµè§ˆå™¨ï¼šè®¾ç½® `User-Agent`
- APIè®¿é—®ï¼šæ·»åŠ  `Authorization` å¤´
- è¯­è¨€è®¾ç½®ï¼šé…ç½® `Accept-Language`
- è‡ªå®šä¹‰è·¯å¾„ï¼šå¯æŒ‡å®šå…¶ä»–ä½ç½®çš„ headers æ–‡ä»¶

**è·¯å¾„è¯´æ˜**ï¼š
- æ”¯æŒç›¸å¯¹è·¯å¾„ï¼šç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•
- æ”¯æŒç»å¯¹è·¯å¾„ï¼šå¦‚ `/path/to/custom_headers.json`

---

### `extension_blacklist`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ‰©å±•åé»‘åå• | array | `[".css", ".mp4", ".js", ...]` |

**ä½œç”¨**ï¼šè·³è¿‡æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"extension_blacklist": [
  ".css", ".js", ".svg",
  ".jpg", ".png", ".gif",
  ".mp4", ".mp3", ".avi",
  ".zip", ".rar", ".tar",
  ".pdf", ".doc", ".docx"
]
```

**è¿‡æ»¤è§„åˆ™è¯´æ˜**ï¼š

1. **è‡ªåŠ¨å¤„ç†æŸ¥è¯¢å‚æ•°**ï¼šæ‰©å±•åè¿‡æ»¤ä¼šè‡ªåŠ¨å¤„ç†å¸¦æŸ¥è¯¢å‚æ•°çš„ URL
   - âœ… `image.png` â†’ è¢«è¿‡æ»¤
   - âœ… `image.png?v=1` â†’ è¢«è¿‡æ»¤
   - âœ… `image.png?timestamp=1234567890&quality=high` â†’ è¢«è¿‡æ»¤
   - âœ… `script.js?version=1.2.3` â†’ è¢«è¿‡æ»¤

2. **å®ç°åŸç†**ï¼šä½¿ç”¨ `urllib.parse.urlparse()` è§£æ URLï¼Œåªæ£€æŸ¥è·¯å¾„éƒ¨åˆ†ï¼ˆpathï¼‰ï¼Œå¿½ç•¥æŸ¥è¯¢å‚æ•°ï¼ˆqueryï¼‰å’Œç‰‡æ®µï¼ˆfragmentï¼‰

3. **å¤§å°å†™ä¸æ•æ„Ÿ**ï¼šæ‰©å±•ååŒ¹é…ä¸åŒºåˆ†å¤§å°å†™
   - âœ… `file.PNG` â†’ è¢«è¿‡æ»¤ï¼ˆåŒ¹é… `.png`ï¼‰
   - âœ… `file.JPG?v=test` â†’ è¢«è¿‡æ»¤ï¼ˆåŒ¹é… `.jpg`ï¼‰

4. **æ”¯æŒçš„æ‰©å±•åç±»å‹**ï¼š
   - æ ·å¼æ–‡ä»¶ï¼š`.css`, `.scss`, `.less`, `.sass`
   - è„šæœ¬æ–‡ä»¶ï¼š`.js`, `.map`, `.json`
   - å›¾ç‰‡æ–‡ä»¶ï¼š`.jpg`, `.jpeg`, `.png`, `.gif`, `.svg`, `.webp`, `.bmp`, `.ico`
   - å­—ä½“æ–‡ä»¶ï¼š`.woff`, `.woff2`, `.ttf`, `.eot`, `.otf`
   - è§†é¢‘æ–‡ä»¶ï¼š`.mp4`, `.avi`, `.mov`, `.wmv`, `.flv`, `.mkv`, `.webm`
   - éŸ³é¢‘æ–‡ä»¶ï¼š`.mp3`, `.wav`, `.ogg`, `.aac`, `.flac`
   - æ–‡æ¡£æ–‡ä»¶ï¼š`.pdf`, `.doc`, `.docx`, `.xls`, `.xlsx`, `.ppt`, `.pptx`
   - å‹ç¼©æ–‡ä»¶ï¼š`.zip`, `.rar`, `.7z`, `.tar`, `.gz`, `.bz2`
   - å…¶ä»–æ–‡ä»¶ï¼š`.swf`, `.exe`, `.dll`, `.bin`, `.dmg`, `.apk`, `.iso`

---

## è¿‡æ»¤è§„åˆ™

### `danger_filter_enabled`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| å±é™©æ¥å£è¿‡æ»¤å¼€å…³ | int | `1` |

**ä½œç”¨**ï¼šæ˜¯å¦å¯ç”¨å±é™©APIæ¥å£è¿‡æ»¤

**é…ç½®**ï¼š
```json
"danger_filter_enabled": 1  // 1=å¯ç”¨, 0=ç¦ç”¨
```

---

### `danger_api_list`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| å±é™©APIå…³é”®è¯åˆ—è¡¨ | array | `[...]` |

**ä½œç”¨**ï¼šåŒ…å«å±é™©æ“ä½œçš„å…³é”®è¯åˆ—è¡¨

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"danger_api_list": [
  "del", "delete", "drop",
  "truncate", "shutdown", "stop",
  "deactivate", "disable", "remove"
]
```

---

### `allowed_api_list`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| å…è®¸çš„APIç«¯ç‚¹åˆ—è¡¨ | array | `["/docs/en/"]` |

**ä½œç”¨**ï¼šç™½åå•APIç«¯ç‚¹åˆ—è¡¨ï¼Œå³ä½¿åœ¨å±é™©APIè¿‡æ»¤å¯ç”¨æ—¶ä¹Ÿå…è®¸è®¿é—®

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"allowed_api_list": [
  "/docs/en/",
  "/api/v1/docs/"
]
```

**åº”ç”¨åœºæ™¯**ï¼š
- ç‰¹æ®ŠAPIï¼šæŸäº›åŒ…å«å±é™©å…³é”®è¯ä½†å®é™…å®‰å…¨çš„APIç«¯ç‚¹
- æ–‡æ¡£è·¯å¾„ï¼šå¦‚ `/docs/en/` ç­‰æ–‡æ¡£ç›¸å…³è·¯å¾„
- ç™½åå•æœºåˆ¶ï¼šåœ¨ `danger_filter_enabled=1` æ—¶è¦†ç›–è¿‡æ»¤è§„åˆ™

---

### `is_duplicate`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| å¯ç”¨é‡å¤URLå¤„ç† | int | `0` |

**ä½œç”¨**ï¼šæ˜¯å¦å¯ç”¨é‡å¤URLçš„å»é‡å¤„ç†

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"is_duplicate": 1  // 1=å¼€å¯, 0=å…³é—­
```

**åº”ç”¨åœºæ™¯**ï¼š
- é¿å…é‡å¤çˆ¬å–ï¼šåŒä¸€URLåªè®¿é—®ä¸€æ¬¡
- èŠ‚çœèµ„æºï¼šå‡å°‘ä¸å¿…è¦çš„HTTPè¯·æ±‚
- æé«˜æ•ˆç‡ï¼šåœ¨URLæ•°é‡è¾ƒå¤šæ—¶æé«˜æ‰«æé€Ÿåº¦

---

### `exclude_fuzzy`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ¨¡ç³Šæ’é™¤è·¯å¾„ | array | `["/blog/", "/news/", ...]` |

**ä½œç”¨**ï¼šæ’é™¤åŒ…å«ç‰¹å®šå…³é”®è¯çš„URLè·¯å¾„

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"exclude_fuzzy": [
  "/blog/",
  "/news/",
  "/community/",
  "/forum/",
  "download",
  "_modules",
  "/product/"
]
```

---

### `title_filter_list`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ ‡é¢˜è¿‡æ»¤åˆ—è¡¨ | array | `["Page Not Found", "404 Not Found"]` |

**ä½œç”¨**ï¼šæ ¹æ®é¡µé¢æ ‡é¢˜è¿‡æ»¤æ— æ•ˆé¡µé¢

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"title_filter_list": [
  "Page Not Found",
  "404 Not Found",
  "Access Denied",
  "Service Unavailable"
]
```

---

### `title_cleanup_patterns`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ ‡é¢˜æ¸…ç†æ¨¡å¼åˆ—è¡¨ | array | `["- Claude Code Docs", "\| Claude Code Docs", "â€” Claude Code Docs"]` |

**ä½œç”¨**ï¼šä»é¡µé¢æ ‡é¢˜ä¸­ç§»é™¤æŒ‡å®šçš„åç¼€æˆ–æ¨¡å¼

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"title_cleanup_patterns": [
  "- Claude Code Docs",
  "| Claude Code Docs",
  "â€” Claude Code Docs",
  " | Documentation",
  " - API Reference"
]
```

**åº”ç”¨åœºæ™¯**ï¼š
- æ ‡é¢˜æ ‡å‡†åŒ–ï¼šç§»é™¤ç½‘ç«™åç§°åç¼€
- æ–‡ä»¶å‘½åä¼˜åŒ–ï¼šç”Ÿæˆæ›´ç®€æ´çš„æ–‡ä»¶å
- å†…å®¹æå–ï¼šæå–æ–‡æ¡£çš„æ ¸å¿ƒæ ‡é¢˜

**å·¥ä½œåŸç†**ï¼š
- åœ¨æå–é¡µé¢æ ‡é¢˜åï¼Œè‡ªåŠ¨ç§»é™¤åŒ¹é…çš„æ¨¡å¼
- æ”¯æŒä¸­æ–‡ç ´æŠ˜å·ï¼ˆâ€”ï¼‰ã€è‹±æ–‡è¿å­—ç¬¦ï¼ˆ-ï¼‰ã€ç«–çº¿ï¼ˆ|ï¼‰ç­‰åˆ†éš”ç¬¦

---

### `status_code_filter`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| çŠ¶æ€ç è¿‡æ»¤åˆ—è¡¨ | array | `[404, 503, 502, ...]` |

**ä½œç”¨**ï¼šè¿‡æ»¤æ‰ç‰¹å®šHTTPçŠ¶æ€ç çš„å“åº”

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"status_code_filter": [
  404,   // Not Found
  503,   // Service Unavailable
  502,   // Bad Gateway
  504,   // Gateway Timeout
  403,   // Forbidden
  401,   // Unauthorized
  500    // Internal Server Error
]
```

---

## æ–‡æ¡£çˆ¬å–æ¨¡å¼

### `mode`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | å¯é€‰å€¼ |
|------|------|--------|--------|
| çˆ¬å–æ¨¡å¼ | int | `0` | `0` / `1` / `2` / `3` |

**ä½œç”¨**ï¼šæ§åˆ¶æ–‡æ¡£çˆ¬å–çš„è¡Œä¸ºæ¨¡å¼

**æ¨¡å¼è¯´æ˜**ï¼š

| æ¨¡å¼å€¼ | åç§° | è¡Œä¸ºè¯´æ˜ | åº”ç”¨åœºæ™¯ |
|--------|------|----------|----------|
| `0` | ä»…çˆ¬å–CSV | åªæ‰§è¡ŒURLæ‰«æï¼Œç»“æœä¿å­˜åˆ°CSV | å¸¸è§„æ‰«æ |
| `1` | æŠ“å–æ–‡æ¡£å†…å®¹ | æ‰«æURL + çˆ¬å–æ–‡æ¡£æ­£æ–‡å†…å®¹ | å†…å®¹é‡‡é›† |
| `2` | æŠ“å–é”šç‚¹é“¾æ¥ | æ‰«æURL + æå–TOCé”šç‚¹é“¾æ¥ | æ–‡æ¡£ç´¢å¼• |
| `3` | ç»„åˆæ¨¡å¼ | ä¾æ¬¡æ‰§è¡Œæ–‡æ¡£å†…å®¹çˆ¬å–å’Œé”šç‚¹é“¾æ¥æå– | å®Œæ•´é‡‡é›† |

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"mode": 3
```

**å‘½ä»¤è¡Œä½¿ç”¨**ï¼š
```bash
python -m doc4llm -u https://docs.example.com -mode 3
```

---

### `force_scan`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| å¼ºåˆ¶æ‰«æå¼€å…³ | int | `0` |

**ä½œç”¨**ï¼šåœ¨ mode 1/2 æ—¶ï¼Œæ˜¯å¦å¼ºåˆ¶æ‰§è¡ŒURLæ‰«æä»¥åˆ·æ–°CSVæ–‡ä»¶

**è¡Œä¸ºè¯´æ˜**ï¼š
- `0`ï¼ˆé»˜è®¤ï¼‰ï¼šå¦‚æœCSVæ–‡ä»¶å·²å­˜åœ¨ä¸”æœ‰å†…å®¹ï¼Œè·³è¿‡URLæ‰«ææ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨ç°æœ‰CSVæ–‡ä»¶
- `1`ï¼šå¼ºåˆ¶æ‰§è¡ŒURLæ‰«æï¼Œåˆ·æ–°CSVæ–‡ä»¶å†…å®¹

**é…ç½®**ï¼š
```json
"force_scan": 1  // 1=å¼ºåˆ¶æ‰«æ, 0=æ™ºèƒ½è·³è¿‡
```

**å‘½ä»¤è¡Œä½¿ç”¨**ï¼š
```bash
# ä½¿ç”¨ç°æœ‰CSVæ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
python -m doc4llm -u https://docs.example.com -mode 2

# å¼ºåˆ¶åˆ·æ–°CSVæ–‡ä»¶
python -m doc4llm -u https://docs.example.com -mode 2 -force-scan 1
```

**åº”ç”¨åœºæ™¯**ï¼š
- å¢é‡æ›´æ–°ï¼šCSVæ–‡ä»¶å·²å­˜åœ¨æ—¶ï¼Œè·³è¿‡æ‰«æç›´æ¥ä½¿ç”¨ç°æœ‰ç»“æœ
- å…¨é‡æ›´æ–°ï¼šéœ€è¦è·å–æœ€æ–°URLæ—¶ï¼Œå¼ºåˆ¶åˆ·æ–°CSVæ–‡ä»¶

---

### `doc_dir`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ–‡æ¡£è¾“å‡ºç›®å½• | string | `"md_docs"` |

**ä½œç”¨**ï¼šæ–‡æ¡£å†…å®¹çš„ä¿å­˜ç›®å½•

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"doc_dir": "my_docs"
```

---

### `doc_name`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ–‡æ¡£åç§° | string | `null` |

**ä½œç”¨**ï¼šè¦†ç›–è‡ªåŠ¨æ£€æµ‹çš„æ–‡æ¡£åç§°

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"doc_name": "MyAPI_Documentation"
```

---

### `doc_version`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ–‡æ¡£ç‰ˆæœ¬ | string | `"latest"` |

**ä½œç”¨**ï¼šæŒ‡å®šæ–‡æ¡£çš„ç‰ˆæœ¬å·

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"doc_version": "v2.5.0"
```

---

### `doc_max_depth`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ–‡æ¡£çˆ¬å–æœ€å¤§æ·±åº¦ | int | `10` |

**ä½œç”¨**ï¼šæ–‡æ¡£å†…å®¹çˆ¬å–çš„æœ€å¤§æ·±åº¦

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"doc_max_depth": 15
```

---

### `doc_timeout`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ–‡æ¡£è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰ | int | `30` |

**ä½œç”¨**ï¼šæ–‡æ¡£çˆ¬å–æ—¶çš„HTTPè¯·æ±‚è¶…æ—¶æ—¶é—´

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"doc_timeout": 60
```

---

## TOCé€‰æ‹©å™¨è¯¦è§£

### `doc_toc_selector`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| TOCåŒºåŸŸCSSé€‰æ‹©å™¨ | string / null | `null` |

**ä½œç”¨**ï¼šæŒ‡å®šæ–‡æ¡£é¡µé¢ä¸­ç›®å½•ï¼ˆTOCï¼‰åŒºåŸŸçš„CSSé€‰æ‹©å™¨

**é»˜è®¤è¡Œä¸º**ï¼š
- è®¾ç½®ä¸º `null` æ—¶ï¼Œä½¿ç”¨å†…ç½®çš„ç™½åå•/é»‘åå•ç­–ç•¥è‡ªåŠ¨æ£€æµ‹TOC

**é…ç½®æ–¹å¼**ï¼š

#### åœºæ™¯1ï¼šä½¿ç”¨é»˜è®¤è‡ªåŠ¨æ£€æµ‹

```json
"doc_toc_selector": null
```

é€‚ç”¨äºï¼šClaude Code Docsã€Ray Docsç­‰å·²é€‚é…çš„æ–‡æ¡£ç«™ç‚¹

---

#### åœºæ™¯2ï¼šIDé€‰æ‹©å™¨

**é¡µé¢HTML**ï¼š
```html
<nav id="toc">
  <a href="#section1">Section 1</a>
</nav>
```

**é…ç½®**ï¼š
```json
"doc_toc_selector": "#toc"
```

---

#### åœºæ™¯3ï¼šå•ä¸ªclass

**é¡µé¢HTML**ï¼š
```html
<nav class="toc">
  <a href="#section1">Section 1</a>
</nav>
```

**é…ç½®**ï¼š
```json
"doc_toc_selector": ".toc"
```

---

#### åœºæ™¯4ï¼šå¤šä¸ªclassï¼ˆç²¾ç¡®åŒ¹é…ï¼Œæ¨èï¼‰

**é¡µé¢HTML**ï¼š
```html
<nav class="bd-toc-nav page-toc">
  <a href="#section1">Section 1</a>
</nav>
```

**é…ç½®ï¼ˆæ¨èï¼‰**ï¼š
```json
"doc_toc_selector": ".bd-toc-nav.page-toc"
```

**è¯´æ˜**ï¼š
- âœ… **æ¨èä½¿ç”¨**ï¼šclassä¹‹é—´æ— ç©ºæ ¼ï¼Œè¡¨ç¤º**åŒæ—¶åŒ…å«**è¿™ä¸¤ä¸ªclass
- âœ… **ç²¾ç¡®åŒ¹é…**ï¼šé¿å…åŒ¹é…åˆ°å…¶ä»–ä¸ç›¸å…³å…ƒç´ 
- âœ… **é¿å…å†—ä½™**ï¼šåªåŒ¹é…çœŸæ­£çš„TOCå®¹å™¨

---

#### åœºæ™¯5ï¼šå¤šä¸ªclassï¼ˆORé€»è¾‘ï¼Œæ…ç”¨ï¼‰

**é…ç½®**ï¼š
```json
"doc_toc_selector": ".toc, .sidebar-nav"
```

**è¯´æ˜**ï¼š
- âš ï¸ **æ…ç”¨**ï¼šé€—å·åˆ†éš”è¡¨ç¤ºORé€»è¾‘
- âš ï¸ **å¯èƒ½å†—ä½™**ï¼šä¼šåŒ¹é…æ‰€æœ‰åŒ…å«ä»»ä¸€classçš„å…ƒç´ 
- âŒ **ä¸æ¨è**ï¼šé™¤ééå¸¸ç¡®å®šä¸ä¼šæœ‰å…¶ä»–å…ƒç´ ä½¿ç”¨è¿™äº›class

---

#### åœºæ™¯6ï¼šæ ‡ç­¾+classç»„åˆ

**é¡µé¢HTML**ï¼š
```html
<nav class="toc">
  <a href="#section1">Section 1</a>
</nav>
```

**é…ç½®**ï¼š
```json
"doc_toc_selector": "nav.toc"
```

---

#### åœºæ™¯7ï¼šå±‚çº§é€‰æ‹©å™¨

**é¡µé¢HTML**ï¼š
```html
<div class="sidebar">
  <nav class="toc">
    <a href="#section1">Section 1</a>
  </nav>
</div>
```

**é…ç½®**ï¼š
```json
"doc_toc_selector": ".sidebar .toc"
```

---

### å¸¸è§æ–‡æ¡£æ¡†æ¶çš„é€‰æ‹©å™¨

| æ–‡æ¡£æ¡†æ¶ | æ¨èé€‰æ‹©å™¨ |
|----------|------------|
| **Sphinx** (Pythonå®˜æ–¹æ–‡æ¡£) | `.bd-toc-nav.bd-sidebar` |
| **MkDocs** | `.md-nav` |
| **Docusaurus** | `.table-of-contents` |
| **GitBook** | `.page-toc` |
| **VitePress** | `.VPDocAside` |
| **Mintlify** (Claude Code Docs) | `null` (ä½¿ç”¨è‡ªåŠ¨æ£€æµ‹) |
| **Ray Docs** | `null` (ä½¿ç”¨è‡ªåŠ¨æ£€æµ‹) |

---

### å¦‚ä½•æ‰¾åˆ°é¡µé¢çš„TOCé€‰æ‹©å™¨

#### æ­¥éª¤ï¼š

1. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·**
   - Chrome/Edge: æŒ‰ `F12` æˆ– `Ctrl+Shift+I`
   - Firefox: æŒ‰ `F12`

2. **ä½¿ç”¨å…ƒç´ é€‰æ‹©å™¨**
   - ç‚¹å‡»å…ƒç´ é€‰æ‹©å™¨å›¾æ ‡ï¼ˆæˆ–æŒ‰ `Ctrl+Shift+C`ï¼‰
   - é¼ æ ‡æ‚¬åœåœ¨é¡µé¢TOCåŒºåŸŸ
   - ç‚¹å‡»é€‰ä¸­TOCå®¹å™¨å…ƒç´ 

3. **æŸ¥çœ‹å…ƒç´ çš„classæˆ–id**
   - åœ¨HTMLä»£ç ä¸­æ‰¾åˆ°å¯¹åº”çš„å®¹å™¨æ ‡ç­¾
   - è®°å½•ä¸‹ `class="xxx"` æˆ– `id="xxx"` å±æ€§

4. **æ ¹æ®HTMLç»“æ„é…ç½®é€‰æ‹©å™¨**

#### ç¤ºä¾‹ï¼š

```
å¼€å‘è€…å·¥å…·æ˜¾ç¤ºçš„HTMLï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <nav class="bd-toc-nav page-toc">  â”‚
â”‚   <ul>                              â”‚
â”‚     <li><a href="#intro">...</a></li>â”‚
â”‚   </ul>                              â”‚
â”‚ </nav>                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æå–ä¿¡æ¯ï¼šclass="bd-toc-nav page-toc"

é…ç½®ï¼š.bd-toc-nav.page-tocï¼ˆæ— ç©ºæ ¼ï¼‰
```

---

### CSSé€‰æ‹©å™¨å¿«é€Ÿå‚è€ƒ

| é€‰æ‹©å™¨è¯­æ³• | è¯´æ˜ | ç¤ºä¾‹ |
|------------|------|------|
| `.classname` | classé€‰æ‹©å™¨ | `.toc` |
| `#idname` | IDé€‰æ‹©å™¨ | `#navigation` |
| `tagname` | æ ‡ç­¾é€‰æ‹©å™¨ | `nav` |
| `.class1.class2` | å¤šclass ANDï¼ˆåŒæ—¶åŒ…å«ï¼‰ | `.bd-toc-nav.page-toc` |
| `.class1, .class2` | å¤šclass ORï¼ˆåŒ¹é…ä»»ä¸€ï¼‰ | `.toc, .sidebar` |
| `.parent .child` | å±‚çº§é€‰æ‹©å™¨ï¼ˆåä»£ï¼‰ | `.sidebar .toc` |
| `tag.class` | æ ‡ç­¾+class | `nav.toc` |
| `[attr*='value']` | å±æ€§åŒ…å«æŸå€¼ | `[class*='toc']` |
| `[attr^='value']` | å±æ€§ä»¥æŸå€¼å¼€å¤´ | `[class^='toc-']` |
| `[attr$='value']` | å±æ€§ä»¥æŸå€¼ç»“å°¾ | `[class$='-nav']` |

---

### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# ä½¿ç”¨é»˜è®¤è‡ªåŠ¨æ£€æµ‹
python -m doc4llm -csv urls.csv -mode 2

# æŒ‡å®šTOCé€‰æ‹©å™¨
python -m doc4llm -csv urls.csv -mode 2 -doc-toc-selector ".bd-toc-nav.page-toc"

# ä½¿ç”¨IDé€‰æ‹©å™¨
python -m doc4llm -csv urls.csv -mode 2 -doc-toc-selector "#toc"

# ä½¿ç”¨å¤šä¸ªé€‰æ‹©å™¨ï¼ˆORé€»è¾‘ï¼‰
python -m doc4llm -csv urls.csv -mode 2 -doc-toc-selector ".toc, .sidebar-nav"
```

---

## TOC URLè¿‡æ»¤é…ç½®

### `toc_filter`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| TOC URL è¿‡æ»¤è§„åˆ™ | object | `{...}` |

**ä½œç”¨**ï¼šé…ç½® `DocUrlCrawler` æ¨¡å—æå– TOC é”šç‚¹é“¾æ¥æ—¶çš„æ ‡ç­¾è¿‡æ»¤è§„åˆ™

**é»˜è®¤è¡Œä¸º**ï¼š
- ä½¿ç”¨é¢„å®šä¹‰çš„ç™½åå•/é»‘åå•ç­–ç•¥è‡ªåŠ¨è¯†åˆ« TOC å®¹å™¨å’Œé“¾æ¥
- æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰æˆ–æ‰©å±•è¿‡æ»¤è§„åˆ™

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"toc_filter": {
  "merge_mode": "extend",
  "toc_class_patterns": [
    "custom-toc",
    "special-directory"
  ],
  "toc_link_class_patterns": [
    "custom-toc-item",
    "custom-nav-link"
  ],
  "toc_parent_class_patterns": [
    "custom-menu-item"
  ],
  "content_area_patterns": [
    "custom-content-area"
  ],
  "non_toc_link_patterns": [
    "custom-exclude-link"
  ]
}
```

### é…ç½®å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `merge_mode` | `string` | `"extend"` | åˆå¹¶æ¨¡å¼ï¼š`extend` æˆ– `replace` |
| `toc_class_patterns` | `array` | `[...]` | TOC å®¹å™¨çš„ class/id åŒ¹é…æ¨¡å¼ï¼ˆç™½åå•ï¼‰ |
| `toc_link_class_patterns` | `array` | `[...]` | TOC é“¾æ¥çš„ class åŒ¹é…æ¨¡å¼ï¼ˆç™½åå•ï¼‰ |
| `toc_parent_class_patterns` | `array` | `[...]` | TOC é“¾æ¥çˆ¶å…ƒç´ çš„ class åŒ¹é…æ¨¡å¼ï¼ˆç™½åå•ï¼‰ |
| `content_area_patterns` | `array` | `[...]` | æ­£æ–‡å†…å®¹åŒºåŸŸçš„ class åŒ¹é…æ¨¡å¼ï¼ˆé»‘åå•ï¼‰ |
| `non_toc_link_patterns` | `array` | `[...]` | é TOC é“¾æ¥çš„ class åŒ¹é…æ¨¡å¼ï¼ˆé»‘åå•ï¼‰ |
| `toc_end_markers` | `array` | `[...]` | TOC å†…å®¹ç»“æŸæ ‡è¯†ï¼ˆçº¯æ–‡æœ¬ï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºæ­£åˆ™ï¼‰ |

### é»˜è®¤é…ç½®å€¼

#### `toc_end_markers`ï¼ˆé»˜è®¤ï¼‰

TOC å†…å®¹ç»“æŸæ ‡è¯†ï¼Œé‡åˆ°è¿™äº›æ–‡æœ¬ååœæ­¢æå–åç»­é”šç‚¹é“¾æ¥ï¼š
- `See also` - å¦è¯·å‚é˜…
- `Related articles` - ç›¸å…³æ–‡ç« 
- `Further reading` - å»¶ä¼¸é˜…è¯»
- `External links` - å¤–éƒ¨é“¾æ¥
- `References` - å‚è€ƒèµ„æ–™
- `Related skills` - ç›¸å…³æŠ€èƒ½
- `Next steps` - ä¸‹ä¸€æ­¥
- `Next up` - æ¥ä¸‹æ¥

**ç‰¹æ€§**ï¼š
- **çº¯æ–‡æœ¬é…ç½®**ï¼šç”¨æˆ·åªéœ€å¡«å†™çº¯æ–‡æœ¬ï¼Œç³»ç»Ÿè‡ªåŠ¨è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼
- **åŒºåˆ†å¤§å°å†™**ï¼šç²¾ç¡®åŒ¹é…ï¼ˆ"Next steps" ä¸ä¼šåŒ¹é… "next steps"ï¼‰
- **çµæ´»ç©ºç™½**ï¼šè‡ªåŠ¨æ”¯æŒå˜é•¿çš„ç©ºç™½å­—ç¬¦

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "toc_filter": {
    "merge_mode": "extend",
    "toc_end_markers": [
      "See also",
      "Related articles",
      "Further reading",
      "Next steps"
    ]
  }
}
```

#### `toc_class_patterns`ï¼ˆé»˜è®¤ï¼‰

TOC å®¹å™¨çš„ CSS ç±»å/ID æ¨¡å¼ï¼ˆç™½åå•ï¼‰ï¼š
- `toc` - ç›®å½•é€šç”¨ class
- `table-of-contents` - å®Œæ•´ç›®å½•åç§°
- `navigation` - å¯¼èˆª
- `sidebar` - ä¾§è¾¹æ 
- `menu` - èœå•
- `directory` - ç›®å½•ç´¢å¼•
- `index` - ç´¢å¼•
- `content-side-layout` - ä¾§è¾¹æ å¸ƒå±€å®¹å™¨
- `table-of-contents-` - TOC ç›¸å…³å‰ç¼€

#### `toc_link_class_patterns`ï¼ˆé»˜è®¤ï¼‰

TOC é”šç‚¹é“¾æ¥çš„ç±»åæ¨¡å¼ï¼ˆç™½åå•ï¼‰ï¼š
- `toc-item` - ç›®å½•é¡¹
- `toc-link` - ç›®å½•é“¾æ¥
- `nav-item` - å¯¼èˆªé¡¹
- `nav-link` - å¯¼èˆªé“¾æ¥
- `menu-item` - èœå•é¡¹
- `menu-link` - èœå•é“¾æ¥
- `directory-item` - ç›®å½•é¡¹

#### `toc_parent_class_patterns`ï¼ˆé»˜è®¤ï¼‰

TOC é”šç‚¹é“¾æ¥çš„ç›´æ¥çˆ¶å…ƒç´ ç±»åï¼ˆç™½åå•ï¼‰ï¼š
- `toc-item` - ç›®å½•é¡¹ï¼ˆå¦‚ `<li class="toc-item">`ï¼‰
- `toc-item relative` - å¸¦æœ‰ç›¸å¯¹å®šä½çš„ç›®å½•é¡¹
- `nav-item` - å¯¼èˆªé¡¹
- `menu-item` - èœå•é¡¹

#### `content_area_patterns`ï¼ˆé»˜è®¤ï¼‰

æ­£æ–‡å†…å®¹åŒºåŸŸçš„ç±»åæ¨¡å¼ï¼ˆé»‘åå•ï¼‰ï¼š
- `mdx-content` - MDX å†…å®¹åŒºåŸŸ
- `content-area` - é€šç”¨å†…å®¹åŒºåŸŸ
- `prose` - Prose æ­£æ–‡
- `content-container` - å†…å®¹å®¹å™¨

#### `non_toc_link_patterns`ï¼ˆé»˜è®¤ï¼‰

éç›®å½•é“¾æ¥çš„ç±»åæ¨¡å¼ï¼ˆé»‘åå•ï¼‰ï¼š
- `link` - æ­£æ–‡ç›¸å…³é“¾æ¥
- `opacity-0` - éšè—çš„é”šç‚¹æŒ‰é’®
- `group-hover:opacity-100` - æ‚¬åœæ˜¾ç¤ºçš„é”šç‚¹æŒ‰é’®
- `header-link` - æ ‡é¢˜é“¾æ¥
- `anchor` - é”šç‚¹ç¬¦å·

### åˆå¹¶æ¨¡å¼è¯´æ˜

#### `extend`ï¼ˆæ‰©å±•æ¨¡å¼ï¼Œé»˜è®¤ï¼‰

ä¿ç•™é»˜è®¤é…ç½®ï¼Œå¹¶å°†è‡ªå®šä¹‰é…ç½®è¿½åŠ åˆ°åˆ—è¡¨ä¸­ï¼š

```json
{
  "toc_filter": {
    "merge_mode": "extend",
    "toc_class_patterns": ["my-custom-toc"]
  }
}
```

**ç»“æœ**ï¼šé»˜è®¤çš„ `toc_class_patterns` + `["my-custom-toc"]`

#### `replace`ï¼ˆæ›¿æ¢æ¨¡å¼ï¼‰

å®Œå…¨ä½¿ç”¨è‡ªå®šä¹‰é…ç½®ï¼Œå¿½ç•¥é»˜è®¤é…ç½®ï¼š

```json
{
  "toc_filter": {
    "merge_mode": "replace",
    "toc_class_patterns": ["my-custom-toc"]
  }
}
```

**ç»“æœ**ï¼šä»…ä½¿ç”¨ `["my-custom-toc"]`

### åº”ç”¨åœºæ™¯

#### åœºæ™¯ 1ï¼šå¤„ç†ç‰¹æ®Šæ–‡æ¡£ç«™ç‚¹

æŸäº›æ–‡æ¡£ç«™ç‚¹ä½¿ç”¨è‡ªå®šä¹‰çš„ class åç§°ï¼š

```json
{
  "toc_filter": {
    "merge_mode": "extend",
    "toc_class_patterns": [
      "docs-sidebar",
      "api-navigation",
      "my-doc-index"
    ]
  }
}
```

#### åœºæ™¯ 2ï¼šæ’é™¤å¹²æ‰°å…ƒç´ 

æŸäº›ç«™ç‚¹çš„æ­£æ–‡åŒºåŸŸä½¿ç”¨ç‰¹å®šçš„ classï¼š

```json
{
  "toc_filter": {
    "merge_mode": "extend",
    "content_area_patterns": [
      "main-content",
      "article-body",
      "post-content"
    ]
  }
}
```

#### åœºæ™¯ 3ï¼šç²¾ç¡®åŒ¹é… TOC é“¾æ¥

æŸäº›ç«™ç‚¹çš„ TOC é“¾æ¥æœ‰ç‰¹å®šçš„çˆ¶å…ƒç´ ç»“æ„ï¼š

```json
{
  "toc_filter": {
    "merge_mode": "extend",
    "toc_parent_class_patterns": [
      "my-toc-list-item",
      "nav-list-item active"
    ]
  }
}
```

### ä¸ `doc_toc_selector` çš„åŒºåˆ«

| é…ç½®é¡¹ | ä½œç”¨èŒƒå›´ | ä½¿ç”¨åœºæ™¯ |
|--------|----------|----------|
| `doc_toc_selector` | ç›´æ¥æŒ‡å®š TOC å®¹å™¨çš„ CSS é€‰æ‹©å™¨ | ç²¾ç¡®å®šä½å•ä¸ª TOC å®¹å™¨ |
| `toc_url_filter` | å®šä¹‰è¯†åˆ« TOC çš„æ ‡ç­¾åŒ¹é…è§„åˆ™ | è‡ªåŠ¨è¯†åˆ«å¤šä¸ªå¯èƒ½çš„ TOC å…ƒç´  |

**é…åˆä½¿ç”¨**ï¼š
```json
{
  "doc_toc_selector": ".bd-toc-nav.page-toc",
  "toc_filter": {
    "merge_mode": "extend",
    "non_toc_link_patterns": ["exclude-this-link"]
  }
}
```

---

## å†…å®¹è¿‡æ»¤é…ç½®

> **ğŸ“˜ è¯¦ç»†æ–‡æ¡£**ï¼šå†…å®¹è¿‡æ»¤å™¨é…ç½®æœ‰ç‹¬ç«‹æ–‡æ¡£ [FILTER_CONFIG.md](doc4llm/filter/FILTER_CONFIG.md)ï¼ŒåŒ…å«å®Œæ•´çš„é…ç½®è¯´æ˜ã€é€‰æ‹©å™¨ç±»å‹ã€æ¡†æ¶é¢„è®¾å’Œæœ€ä½³å®è·µã€‚

### `content_filter`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| å†…å®¹è¿‡æ»¤é…ç½® | object | `{...}` |

**ä½œç”¨**ï¼šé…ç½®æ–‡æ¡£å†…å®¹æå–æ—¶çš„è¿‡æ»¤è§„åˆ™ï¼Œç”¨äºç§»é™¤éæ­£æ–‡å†…å®¹ï¼ˆå¯¼èˆªæ ã€é¡µè„šç­‰ï¼‰

**ğŸ“‹ FILTER_CONFIG.md å†…å®¹æ¦‚è¦**ï¼š

- **é…ç½®ç»“æ„**ï¼šæ ¸å¿ƒé…ç½®é¡¹ï¼ˆ`non_content_selectors`ã€`force_remove_selectors`ã€`protected_tag_blacklist` ç­‰ï¼‰
- **é€‰æ‹©å™¨ç±»å‹**ï¼šè¯­ä¹‰åŒ–é€‰æ‹©å™¨ã€é€šç”¨é€‰æ‹©å™¨ã€æ¨¡ç³ŠåŒ¹é…å…³é”®è¯ã€å†…å®¹ä¿ç•™é€‰æ‹©å™¨
- **é…ç½®ä¼˜å…ˆçº§**ï¼šä¸‰å±‚ä¼˜å…ˆçº§æœºåˆ¶ï¼ˆå¼ºåˆ¶åˆ é™¤ > å†…å®¹ä¿æŠ¤ > å¸¸è§„åˆ é™¤ï¼‰
- **æ¡†æ¶é¢„è®¾**ï¼šMintlifyã€Docusaurusã€VitePressã€GitBook
- **ç¼–ç¨‹é…ç½®**ï¼šPython ä»£ç ä¸­ä½¿ç”¨è¿‡æ»¤å™¨çš„æ–¹æ³•
- **æœ€ä½³å®è·µ**ï¼šé€‰æ‹©å™¨ä¼˜å…ˆçº§å»ºè®®ã€æ¨¡ç³ŠåŒ¹é…æ³¨æ„äº‹é¡¹

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"content_filter": {
  "merge_mode": "extend",
  "documentation_preset": "mintlify",
  "non_content_selectors": [".sidebar", ".footer"],
  "fuzzy_keywords": ["nav", "menu"],
  "log_levels": ["TRACE:", "VERBOSE:"],
  "meaningless_content": ["Skip to content"],
  "content_end_markers": ["Next steps"],
  "content_preserve_selectors": ["aside"],
  "code_container_selectors": ["pre", "code"]
}
```

### é…ç½®å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `merge_mode` | `string` | `"extend"` | åˆå¹¶æ¨¡å¼ï¼š`extend` æˆ– `replace` |
| `documentation_preset` | `string\|null` | `null` | æ¡†æ¶é¢„è®¾ï¼š`mintlify` / `docusaurus` / `vitepress` / `gitbook` |
| `non_content_selectors` | `array` | `[...]` | éæ­£æ–‡å…ƒç´ çš„ CSS é€‰æ‹©å™¨åˆ—è¡¨ |
| `fuzzy_keywords` | `array` | `[...]` | æ¨¡ç³ŠåŒ¹é…å…³é”®è¯ï¼ˆç”¨äº class/id åŒ¹é…ï¼‰ |
| `log_levels` | `array` | `[...]` | æ—¥å¿—çº§åˆ«è¿‡æ»¤ï¼ˆç§»é™¤åŒ…å«è¿™äº›çº§åˆ«çš„è¡Œï¼‰ |
| `meaningless_content` | `array` | `[...]` | æ— æ„ä¹‰å†…å®¹æ¨¡å¼ï¼ˆä»æ–‡æ¡£ä¸­ç§»é™¤ï¼‰ |
| `content_end_markers` | `array` | `[...]` | å†…å®¹ç»“æŸæ ‡è¯†ï¼ˆé‡åˆ°ååœæ­¢æå–ï¼‰ |
| `content_preserve_selectors` | `array` | `[...]` | ä¿æŠ¤é€‰æ‹©å™¨ï¼ˆåŒ¹é…çš„å…ƒç´ ä¸ä¼šè¢«ç§»é™¤ï¼‰ |
| `code_container_selectors` | `array` | `[...]` | ä»£ç å®¹å™¨é€‰æ‹©å™¨ï¼ˆç‰¹æ®Šå¤„ç†ä»£ç å—ï¼‰ |

### `merge_mode` - åˆå¹¶æ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ |
|------|------|
| `extend` | æ‰©å±•æ¨¡å¼ï¼šä¿ç•™é»˜è®¤é…ç½®ï¼Œå°†è‡ªå®šä¹‰é…ç½®è¿½åŠ åˆ°åˆ—è¡¨ä¸­ |
| `replace` | æ›¿æ¢æ¨¡å¼ï¼šå®Œå…¨ä½¿ç”¨è‡ªå®šä¹‰é…ç½®ï¼Œå¿½ç•¥é»˜è®¤é…ç½® |

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "non_content_selectors": [".my-sidebar"]
  }
}
```

### `documentation_preset` - æ¡†æ¶é¢„è®¾

**æ”¯æŒçš„é¢„è®¾**ï¼š

| é¢„è®¾åç§° | é€‚ç”¨æ¡†æ¶ | è¯´æ˜ |
|----------|----------|------|
| `mintlify` | Mintlify | Claude Code Docs ç­‰ä½¿ç”¨ Mintlify çš„ç«™ç‚¹ |
| `docusaurus` | Docusaurus | Meta çš„ Docusaurus æ–‡æ¡£æ¡†æ¶ |
| `vitepress` | VitePress | Vue ç”Ÿæ€çš„ VitePress æ¡†æ¶ |
| `gitbook` | GitBook | GitBook æ–‡æ¡£å¹³å° |

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "documentation_preset": "mintlify"
  }
}
```

### `non_content_selectors` - éæ­£æ–‡é€‰æ‹©å™¨

**ä½œç”¨**ï¼šæŒ‡å®šåº”è¯¥è¢«ç§»é™¤çš„ CSS é€‰æ‹©å™¨

**é»˜è®¤é…ç½®**ï¼ˆéƒ¨åˆ†ï¼‰ï¼š
- `.sidebar`, `.footer`, `.header`
- `.navigation`, `.menu`
- `.breadcrumbs`, `.pagination`

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "non_content_selectors": [
      ".custom-sidebar",
      ".site-footer",
      "#top-navigation"
    ]
  }
}
```

### `fuzzy_keywords` - æ¨¡ç³ŠåŒ¹é…å…³é”®è¯

**ä½œç”¨**ï¼šé€šè¿‡å…³é”®è¯æ¨¡ç³ŠåŒ¹é… class/id åç§°ï¼Œè‡ªåŠ¨ç§»é™¤åŒ¹é…çš„å…ƒç´ 

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "fuzzy_keywords": [
      "nav",
      "menu",
      "sidebar",
      "footer",
      "header"
    ]
  }
}
```

**å·¥ä½œåŸç†**ï¼š
- å¦‚æœå…ƒç´ çš„ class æˆ– id åŒ…å«è¿™äº›å…³é”®è¯ï¼Œå°†è¢«ç§»é™¤
- ä¾‹å¦‚ï¼š`.main-nav`, `#footer-menu`, `.sidebar-wrapper`

### `log_levels` - æ—¥å¿—çº§åˆ«è¿‡æ»¤

**ä½œç”¨**ï¼šä»æ–‡æ¡£å†…å®¹ä¸­ç§»é™¤åŒ…å«æŒ‡å®šæ—¥å¿—çº§åˆ«çš„è¡Œ

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "log_levels": [
      "TRACE:",
      "VERBOSE:",
      "DEBUG:",
      "INFO:"
    ]
  }
}
```

**åº”ç”¨åœºæ™¯**ï¼š
- æŠ€æœ¯æ–‡æ¡£ä¸­åŒ…å«æ—¥å¿—è¾“å‡ºç¤ºä¾‹
- æ¸…ç†æ–‡æ¡£ä¸­çš„è°ƒè¯•ä¿¡æ¯

### `meaningless_content` - æ— æ„ä¹‰å†…å®¹

**ä½œç”¨**ï¼šä»æ–‡æ¡£ä¸­ç§»é™¤æ— æ„ä¹‰çš„æ–‡æœ¬å†…å®¹

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "meaningless_content": [
      "Copy\n\nAsk AI",
      "Skip to main content",
      "Navigation menu"
    ]
  }
}
```

### `content_end_markers` - å†…å®¹ç»“æŸæ ‡è¯†

**ä½œç”¨**ï¼šé‡åˆ°è¿™äº›æ–‡æœ¬ååœæ­¢æå–åç»­å†…å®¹

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "content_end_markers": [
      "Next steps",
      "See also",
      "Related articles",
      "Further reading"
    ]
  }
}
```

### `content_preserve_selectors` - ä¿æŠ¤é€‰æ‹©å™¨ï¼ˆé‡è¦ï¼‰

**ä½œç”¨**ï¼šæŒ‡å®šåº”è¯¥è¢«ä¿æŠ¤çš„ CSS é€‰æ‹©å™¨ï¼ŒåŒ¹é…çš„å…ƒç´ åŠå…¶å­å…ƒç´ ä¸ä¼šè¢«ç§»é™¤

**ç‰¹æ€§**ï¼š
- **çº§è”ä¿æŠ¤**ï¼šçˆ¶å…ƒç´ åŒ¹é…æ—¶ï¼Œæ‰€æœ‰å­å…ƒç´ ä¹Ÿå—ä¿æŠ¤
- **ä¼˜å…ˆçº§æœ€é«˜**ï¼šå³ä½¿å­å…ƒç´ åŒ¹é… `non_content_selectors`ï¼Œåªè¦çˆ¶å…ƒç´ åŒ¹é…ä¿æŠ¤é€‰æ‹©å™¨ï¼Œå°±ä¸ä¼šè¢«ç§»é™¤

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "content_preserve_selectors": [
      "aside",
      ".callout",
      ".admonition",
      ".tip-box"
    ]
  }
}
```

**åº”ç”¨åœºæ™¯**ï¼š
- **Starlight æç¤ºæ¡†**ï¼šä¿æŠ¤ `<aside class="note">` ç­‰æç¤ºå…ƒç´ 
- **Docusaurus æç¤ºå—**ï¼šä¿æŠ¤ `.admonition` å…ƒç´ 
- **Mintlify æç¤ºå¡ç‰‡**ï¼šä¿æŠ¤ `.callout` å…ƒç´ 

**å·¥ä½œåŸç†**ï¼š
```
å‡è®¾é…ç½®ï¼š
- non_content_selectors: [".sidebar"]
- content_preserve_selectors: ["aside"]

é¡µé¢ç»“æ„ï¼š
<div class="sidebar">
  <aside class="note">
    <p>é‡è¦æç¤ºå†…å®¹</p>
  </aside>
</div>

ç»“æœï¼šaside å…ƒç´ åŠå…¶å†…å®¹è¢«ä¿æŠ¤ï¼Œä¸ä¼šè¢«ç§»é™¤
```

### `code_container_selectors` - ä»£ç å®¹å™¨é€‰æ‹©å™¨

**ä½œç”¨**ï¼šæŒ‡å®šä»£ç å—çš„å®¹å™¨é€‰æ‹©å™¨ï¼Œè¿›è¡Œç‰¹æ®Šå¤„ç†

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "content_filter": {
    "merge_mode": "extend",
    "code_container_selectors": [
      "pre",
      "code",
      ".highlight",
      ".code-block"
    ]
  }
}
```

### ä¸ `toc_filter` çš„é…åˆä½¿ç”¨

```json
{
  "toc_filter": {
    "merge_mode": "extend",
    "toc_class_patterns": ["custom-toc"]
  },
  "content_filter": {
    "merge_mode": "extend",
    "non_content_selectors": [".sidebar"],
    "content_preserve_selectors": ["aside"]
  }
}
```

---

## å·¥å…·é…ç½®

### `tool.markdown_extractor`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| Markdown æå–å™¨é…ç½® | object | `{...}` |

**ä½œç”¨**ï¼šé…ç½® Markdown å†…å®¹æå–å’Œæœç´¢çš„è¡Œä¸º

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"tool": {
  "markdown_extractor": {
    "default_search_mode": "exact",
    "case_sensitive": false,
    "max_results": 10,
    "fuzzy_threshold": 0.6,
    "enable_fallback": false,
    "fallback_modes": ["case_insensitive", "partial", "fuzzy"],
    "compress_threshold": 2000,
    "enable_compression": false
  }
}
```

### é…ç½®å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `default_search_mode` | `string` | `"exact"` | é»˜è®¤æœç´¢æ¨¡å¼ |
| `case_sensitive` | `bool` | `false` | æ˜¯å¦åŒºåˆ†å¤§å°å†™ |
| `max_results` | `int` | `10` | æ¨¡ç³Š/éƒ¨åˆ†æœç´¢çš„æœ€å¤§ç»“æœæ•° |
| `fuzzy_threshold` | `float` | `0.6` | æ¨¡ç³ŠåŒ¹é…çš„æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼ (0.0-1.0) |
| `enable_fallback` | `bool` | `false` | æ˜¯å¦å¯ç”¨è‡ªåŠ¨å›é€€åˆ°å…¶ä»–æœç´¢æ¨¡å¼ |
| `fallback_modes` | `array` | `[...]` | å›é€€æ—¶å°è¯•çš„æœç´¢æ¨¡å¼åˆ—è¡¨ |
| `compress_threshold` | `int` | `2000` | å†…å®¹å‹ç¼©çš„è¡Œæ•°é˜ˆå€¼ |
| `enable_compression` | `bool` | `false` | æ˜¯å¦å¯ç”¨è‡ªåŠ¨å†…å®¹å‹ç¼© |

### `default_search_mode` - æœç´¢æ¨¡å¼

**æ”¯æŒçš„æœç´¢æ¨¡å¼**ï¼š

| æ¨¡å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `exact` | ç²¾ç¡®åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ç”± `case_sensitive` æ§åˆ¶ï¼‰ | ç²¾ç¡®æŸ¥æ‰¾æ ‡é¢˜ |
| `case_insensitive` | ä¸åŒºåˆ†å¤§å°å†™çš„ç²¾ç¡®åŒ¹é… | æ ‡é¢˜å¤§å°å†™ä¸ç¡®å®š |
| `partial` | éƒ¨åˆ†åŒ¹é…ï¼ˆå…³é”®è¯åŒ¹é…ï¼‰ | æŸ¥æ‰¾åŒ…å«å…³é”®è¯çš„æ ‡é¢˜ |
| `fuzzy` | æ¨¡ç³ŠåŒ¹é…ï¼ˆç›¸ä¼¼åº¦åŒ¹é…ï¼‰ | æ ‡é¢˜å¯èƒ½æœ‰æ‹¼å†™å˜åŒ– |

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "default_search_mode": "exact"
    }
  }
}
```

### `case_sensitive` - å¤§å°å†™æ•æ„Ÿ

**ä½œç”¨**ï¼šæ§åˆ¶æœç´¢æ—¶æ˜¯å¦åŒºåˆ†å¤§å°å†™

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "case_sensitive": false
    }
  }
}
```

### `max_results` - æœ€å¤§ç»“æœæ•°

**ä½œç”¨**ï¼šæ¨¡ç³Šæœç´¢æˆ–éƒ¨åˆ†æœç´¢æ—¶è¿”å›çš„æœ€å¤§ç»“æœæ•°

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "max_results": 20
    }
  }
}
```

### `fuzzy_threshold` - æ¨¡ç³ŠåŒ¹é…é˜ˆå€¼

**ä½œç”¨**ï¼šæ¨¡ç³ŠåŒ¹é…çš„æœ€å°ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.0-1.0ï¼‰

| é˜ˆå€¼èŒƒå›´ | è¯´æ˜ |
|----------|------|
| `0.0 - 0.4` | å®½æ¾åŒ¹é…ï¼Œæ›´å¤šç»“æœ |
| `0.5 - 0.7` | å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èï¼‰ |
| `0.8 - 1.0` | ä¸¥æ ¼åŒ¹é…ï¼Œè¾ƒå°‘ç»“æœ |

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "fuzzy_threshold": 0.7
    }
  }
}
```

### `enable_fallback` - å¯ç”¨å›é€€æœºåˆ¶

**ä½œç”¨**ï¼šå½“é»˜è®¤æœç´¢æ¨¡å¼æ‰¾ä¸åˆ°ç»“æœæ—¶ï¼Œè‡ªåŠ¨å°è¯•å…¶ä»–æœç´¢æ¨¡å¼

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "enable_fallback": true,
      "fallback_modes": ["case_insensitive", "partial", "fuzzy"]
    }
  }
}
```

**å›é€€æµç¨‹**ï¼š
1. å°è¯• `default_search_mode`ï¼ˆå¦‚ `exact`ï¼‰
2. å¦‚æœæ— ç»“æœï¼Œå°è¯• `fallback_modes[0]`ï¼ˆå¦‚ `case_insensitive`ï¼‰
3. å¦‚æœä»æ— ç»“æœï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªæ¨¡å¼
4. ç›´åˆ°æ‰¾åˆ°ç»“æœæˆ–å°è¯•å®Œæ‰€æœ‰æ¨¡å¼

### `fallback_modes` - å›é€€æ¨¡å¼åˆ—è¡¨

**ä½œç”¨**ï¼šæŒ‡å®šå›é€€æ—¶å°è¯•çš„æœç´¢æ¨¡å¼é¡ºåº

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "fallback_modes": [
        "case_insensitive",
        "partial",
        "fuzzy"
      ]
    }
  }
}
```

### `compress_threshold` - å‹ç¼©é˜ˆå€¼

**ä½œç”¨**ï¼šå½“æå–çš„å†…å®¹è¡Œæ•°è¶…è¿‡æ­¤é˜ˆå€¼æ—¶ï¼Œè§¦å‘å‹ç¼©

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "compress_threshold": 1000
    }
  }
}
```

### `enable_compression` - å¯ç”¨å‹ç¼©

**ä½œç”¨**ï¼šæ˜¯å¦å¯ç”¨è‡ªåŠ¨å†…å®¹å‹ç¼©

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "tool": {
    "markdown_extractor": {
      "enable_compression": true
    }
  }
}
```

---

## è¾“å‡ºé…ç½®

### `results_dir`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| ç»“æœæ–‡ä»¶ä¿å­˜ç›®å½• | string | `"results"` |

**ä½œç”¨**ï¼šæ‰€æœ‰æ‰«æç»“æœæ–‡ä»¶çš„ä¿å­˜ç›®å½•

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"results_dir": "results"
```

**åº”ç”¨åœºæ™¯**ï¼š
- ç»Ÿä¸€ç®¡ç†ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰æ‰«æç»“æœæ–‡ä»¶
- åŠ¨æ€æ–‡ä»¶åï¼šæ‰¹é‡æ‰«ææ—¶åŠ¨æ€ç”Ÿæˆçš„æ±‡æ€»æ–‡ä»¶ä¹Ÿä¼šä¿å­˜åˆ°æ­¤ç›®å½•
- ç›®å½•è‡ªå®šä¹‰ï¼šå¯æ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºå…¶ä»–ç›®å½•å

**è¯´æ˜**ï¼š
- æ‰¹é‡æ‰«æçš„æ±‡æ€»æ–‡ä»¶æ ¼å¼ï¼š`{results_dir}/all_results_YYYYMMDD_HHMMSS.csv`
- CSV è¾“å‡ºæ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ç­‰éƒ½ä¿å­˜åœ¨æ­¤ç›®å½•æˆ–å…¶å­ç›®å½•

---

### `output_file`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è¾“å‡ºæ–‡ä»¶è·¯å¾„ | string | `"results/å®æ—¶è¾“å‡ºæ–‡ä»¶.csv"` |

**ä½œç”¨**ï¼šå®æ—¶æ‰«æç»“æœçš„CSVè¾“å‡ºæ–‡ä»¶è·¯å¾„

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"output_file": "results/my_scan.csv"
```

---

### `output_log_file`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è¾“å‡ºæ—¥å¿—æ–‡ä»¶è·¯å¾„ | string | `"results/output.out"` |

**ä½œç”¨**ï¼šæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆåŒæ—¶è¾“å‡ºåˆ°ç»ˆç«¯å’Œæ–‡ä»¶ï¼‰

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"output_log_file": "results/output.out"
```

**åº”ç”¨åœºæ™¯**ï¼š
- ä¿å­˜æ‰«æè¿‡ç¨‹æ—¥å¿—ï¼šè®°å½•æ‰€æœ‰ç»ˆç«¯è¾“å‡º
- è°ƒè¯•åˆ†æï¼šæŸ¥çœ‹æ‰«æè¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯
- å†å²è®°å½•ï¼šä¿ç•™æ‰«æå†å²ä¾›åç»­æŸ¥çœ‹

---

### `debug_log_file`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è°ƒè¯•æ—¥å¿—æ–‡ä»¶è·¯å¾„ | string | `"results/debug.log"` |

**ä½œç”¨**ï¼šè°ƒè¯•æ¨¡å¼ä¸‹çš„è¯¦ç»†æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆä»…åœ¨ debug_mode=1 æ—¶ç”Ÿæ•ˆï¼‰

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"debug_log_file": "results/debug.log"
```

**åº”ç”¨åœºæ™¯**ï¼š
- é—®é¢˜æ’æŸ¥ï¼šè®°å½•è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- æ€§èƒ½åˆ†æï¼šè·Ÿè¸ªç¨‹åºæ‰§è¡Œæµç¨‹
- å¼€å‘è°ƒè¯•ï¼šå¼€å‘é˜¶æ®µçš„è¯¦ç»†æ—¥å¿—

---

### `log_max_lines`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| æ—¥å¿—æ–‡ä»¶æœ€å¤§è¡Œæ•° | int | `10000` |

**ä½œç”¨**ï¼šæ—¥å¿—æ–‡ä»¶è½®è½¬å‰çš„æœ€å¤§è¡Œæ•°ï¼Œè¶…è¿‡æ­¤æ•°é‡æ—¶è‡ªåŠ¨åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"log_max_lines": 5000
```

**åº”ç”¨åœºæ™¯**ï¼š
- æ—¥å¿—ç®¡ç†ï¼šé˜²æ­¢å•ä¸ªæ—¥å¿—æ–‡ä»¶è¿‡å¤§
- æ–‡ä»¶åˆ†å‰²ï¼šæŒ‰è¡Œæ•°è‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶
- å­˜å‚¨ä¼˜åŒ–ï¼šæ§åˆ¶æ—¥å¿—æ–‡ä»¶çš„ç£ç›˜å ç”¨

---

### `color_output`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| å½©è‰²è¾“å‡ºå¼€å…³ | bool | `true` |

**ä½œç”¨**ï¼šæ˜¯å¦åœ¨ç»ˆç«¯è¾“å‡ºå½©è‰²æ—¥å¿—

**é…ç½®**ï¼š
```json
"color_output": true
```

---

### `verbose`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è¯¦ç»†è¾“å‡ºå¼€å…³ | bool | `true` |

**ä½œç”¨**ï¼šæ˜¯å¦è¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯

**é…ç½®**ï¼š
```json
"verbose": true
```

---

### `debug_mode`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è°ƒè¯•æ¨¡å¼ | int | `0` |

**ä½œç”¨**ï¼šå¯ç”¨è°ƒè¯•æ¨¡å¼ï¼Œè¾“å‡ºæ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

**é…ç½®**ï¼š
```json
"debug_mode": 1  // 1=å¼€å¯, 0=å…³é—­
```

---

## è‡ªå®šä¹‰URLæ‹¼æ¥é…ç½®

### `fuzz`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| Fuzzæ¨¡å¼å¼€å…³ | int | `0` |

**ä½œç”¨**ï¼šæ˜¯å¦å¯ç”¨è‡ªå®šä¹‰URLæ‹¼æ¥åŠŸèƒ½

**é…ç½®**ï¼š
```json
"fuzz": 1  // 1=å¯ç”¨, 0=ç¦ç”¨
```

---

### `custom_base_url`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è‡ªå®šä¹‰åŸºç¡€URLåˆ—è¡¨ | array | `[]` |

**ä½œç”¨**ï¼šFuzzæ¨¡å¼ä½¿ç”¨çš„åŸºç¡€URLåˆ—è¡¨

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"custom_base_url": [
  "https://api.example.com"
]
```

---

### `path_route`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| è·¯å¾„è·¯ç”±åˆ—è¡¨ | array | `[]` |

**ä½œç”¨**ï¼šFuzzæ¨¡å¼æ‹¼æ¥çš„è·¯å¾„åˆ—è¡¨

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"path_route": [
  "/api/v1/users",
  "/api/v1/products",
  "/admin/dashboard"
]
```

---

### `api_route`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| APIè·¯ç”±åˆ—è¡¨ | array | `[]` |

**ä½œç”¨**ï¼šFuzzæ¨¡å¼æ‹¼æ¥çš„APIè·¯ç”±åˆ—è¡¨

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"api_route": [
  "/api/v1/user/login",
  "/api/v1/user/logout"
]
```

---

## TOC URLè¿‡æ»¤é…ç½®

### `toc_url_filters`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ |
|------|------|--------|
| TOC URLè¿‡æ»¤è§„åˆ™ | object | `{...}` |

**ä½œç”¨**ï¼šé…ç½®æ–‡æ¡£çˆ¬å–æ—¶çš„URLè¿‡æ»¤è§„åˆ™

**é…ç½®ç¤ºä¾‹**ï¼š
```json
"toc_url_filters": {
  "subdomains": ["docs.", "api.", "developer."],
  "fuzzy_match": ["/docs/", "/guide/", "/tutorial/", "/api/"],
  "exclude_fuzzy": ["/blog/", "/news/", "/community/"]
}
```

**å­å­—æ®µè¯´æ˜**ï¼š

| å­—æ®µ | ä½œç”¨ | ç¤ºä¾‹ |
|------|------|------|
| `subdomains` | åŒ¹é…æŒ‡å®šå­åŸŸå | `["docs.", "api."]` |
| `fuzzy_match` | URLè·¯å¾„åŒ…å«å…³é”®è¯ | `["/docs/", "/api/"]` |
| `exclude_fuzzy` | æ’é™¤åŒ…å«å…³é”®è¯çš„URL | `["/blog/", "/news/"]` |

---

## å†…è”æå–ä¼˜åŒ–

### `enable_inline_extraction`

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | å¯é€‰å€¼ |
|------|------|--------|--------|
| å†…è”æå–å¼€å…³ | int | `1` | `0` / `1` |

**ä½œç”¨**ï¼šæ§åˆ¶åœ¨ mode 1/2/3 æ—¶æ˜¯å¦å¯ç”¨å†…è”æå–ä¼˜åŒ–

**åŠŸèƒ½è¯´æ˜**ï¼š

å½“å¯ç”¨å†…è”æå–æ—¶ï¼ˆé»˜è®¤ï¼‰ï¼Œç³»ç»Ÿä¼šåœ¨æ‰«æè¿‡ç¨‹ä¸­ç›´æ¥ä½¿ç”¨å·²è·å–çš„HTMLå“åº”è¿›è¡Œå†…å®¹å’ŒTOCæå–ï¼Œé¿å…é‡å¤çš„HTTPè¯·æ±‚ã€‚è¿™å¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå‡å°‘ç½‘ç»œæµé‡ã€‚

| è®¾ç½®å€¼ | è¡Œä¸ºè¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|--------|----------|----------|
| `1`ï¼ˆé»˜è®¤ï¼‰ | å¯ç”¨å†…è”æå–ï¼Œåœ¨æ‰«ææ—¶å®æ—¶æå–å†…å®¹/TOC | æ¨èä½¿ç”¨ï¼Œæ€§èƒ½æ›´ä¼˜ |
| `0` | ç¦ç”¨å†…è”æå–ï¼Œä½¿ç”¨ä¼ ç»Ÿçˆ¬è™«æµç¨‹ | å…¼å®¹æ—§ç‰ˆæœ¬ï¼Œè°ƒè¯•ç”¨é€” |

**æ€§èƒ½å¯¹æ¯”**ï¼š

| æŒ‡æ ‡ | ä¼ ç»Ÿæ¨¡å¼ï¼ˆmode 3ï¼‰ | å†…è”æå–æ¨¡å¼ | æå‡ |
|------|-------------------|-------------|------|
| HTTPè¯·æ±‚æ•°ï¼ˆ100ä¸ªURLï¼‰ | 300 | 100 | 66% â†“ |
| æ‰§è¡Œæ—¶é—´ | ~3x | ~1x | 66% â†“ |
| æœåŠ¡å™¨è´Ÿè½½ | 3x | 1x | 66% â†“ |

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "mode": 3,
  "enable_inline_extraction": 1
}
```

**å‘½ä»¤è¡Œä½¿ç”¨**ï¼š
```bash
# ä½¿ç”¨å†…è”æå–ï¼ˆé»˜è®¤ï¼‰
python -m doc4llm -u https://docs.example.com -mode 3

# ç¦ç”¨å†…è”æå–ï¼Œä½¿ç”¨ä¼ ç»Ÿæµç¨‹
python -m doc4llm -u https://docs.example.com -mode 3 -enable-inline-extraction 0
```

**å·¥ä½œåŸç†**ï¼š

```
ä¼ ç»Ÿæ¨¡å¼ï¼ˆmode 3ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPè¯·æ±‚1    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UltimateURL â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ ç›®æ ‡æœåŠ¡å™¨    â”‚
â”‚   Scanner   â”‚                 â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                                   â†“
   å†™å…¥CSV                            è¿”å›HTML
       â†“                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPè¯·æ±‚2    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DocContent  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ ç›®æ ‡æœåŠ¡å™¨    â”‚
â”‚  Crawler    â”‚                 â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPè¯·æ±‚3    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DocUrl      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ ç›®æ ‡æœåŠ¡å™¨    â”‚
â”‚  Crawler    â”‚                 â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å†…è”æå–æ¨¡å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPè¯·æ±‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UltimateURL â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ ç›®æ ‡æœåŠ¡å™¨    â”‚
â”‚   Scanner   â”‚                 â”‚              â”‚
â”‚             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚              â”‚
â”‚  + Content  â”‚  ï¼ˆå†…å­˜å¤„ç†ï¼‰   â”‚              â”‚
â”‚  Extractor  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
   å†™å…¥CSV
       â†“
   æå–å†…å®¹ â”€â”€â†’ ä¿å­˜ docContent.md
       â†“
   æå–TOC â”€â”€â†’ ä¿å­˜ docTOC.md
```

**è¾“å‡ºç»“æœ**ï¼š

ä¸¤ç§æ¨¡å¼çš„è¾“å‡ºæ–‡ä»¶ç»“æ„å®Œå…¨ç›¸åŒï¼š

```
md_docs/
â””â”€â”€ <doc_name>@<doc_version>/
    â”œâ”€â”€ <é¡µé¢1æ ‡é¢˜>/
    â”‚   â”œâ”€â”€ docContent.md    # æ–‡æ¡£æ­£æ–‡å†…å®¹
    â”‚   â””â”€â”€ docTOC.md        # ç›®å½•é”šç‚¹é“¾æ¥
    â”œâ”€â”€ <é¡µé¢2æ ‡é¢˜>/
    â”‚   â”œâ”€â”€ docContent.md
    â”‚   â””â”€â”€ docTOC.md
    â””â”€â”€ ...
```

**æ³¨æ„äº‹é¡¹**ï¼š

1. **çº¿ç¨‹å®‰å…¨**ï¼šå†…è”æå–ä½¿ç”¨çº¿ç¨‹é”ä¿è¯å¹¶å‘å®‰å…¨
2. **é”™è¯¯å¤„ç†**ï¼šæå–å¤±è´¥ä¸ä¼šå½±å“æ‰«ææµç¨‹ï¼Œä¼ ç»Ÿçˆ¬è™«ä»å¯ä½œä¸ºå¤‡é€‰
3. **å‘åå…¼å®¹**ï¼šç¦ç”¨å†…è”æå–åï¼Œå®Œå…¨å›é€€åˆ°ä¼ ç»Ÿçˆ¬è™«æµç¨‹
4. **å†…å­˜å ç”¨**ï¼šå†…è”æå–åœ¨å†…å­˜ä¸­å¤„ç†HTMLï¼Œä¸é¢å¤–å¢åŠ ç£ç›˜å ç”¨

---

## å®Œæ•´é…ç½®ç¤ºä¾‹

```json
{
  "start_url": "https://docs.example.com",
  "proxy": "http://127.0.0.1:7890",
  "delay": 0.5,
  "max_workers": 20,
  "timeout": 30,
  "max_depth": 5,
  "blacklist_domains": [
    "www.w3.org",
    "www.baidu.com",
    "github.com"
  ],
  "whitelist_domains": [
    "docs.example.com",
    "api.example.com"
  ],
  "headers_path": "headers.json",
  "output_file": "results/scan_results.csv",
  "color_output": true,
  "verbose": true,
  "extension_blacklist": [
    ".css", ".mp4", ".js", ".svg",
    ".jpg", ".png", ".gif", ".zip"
  ],
  "max_urls": 10000,
  "smart_concatenation": true,
  "debug_mode": 0,
  "url_scope_mode": 0,
  "danger_filter_enabled": 1,
  "danger_api_list": [
    "del", "delete", "drop",
    "truncate", "shutdown", "stop",
    "deactivate", "disable", "remove"
  ],
  "allowed_api_list": [
    "/docs/en/"
  ],
  "is_duplicate": 0,
  "fuzz": 0,
  "custom_base_url": [],
  "path_route": [],
  "api_route": [],
  "exclude_fuzzy": [
    "/blog/", "/news/", "/forum/"
  ],
  "title_filter_list": [
    "Page Not Found",
    "404 Not Found",
    "Access Denied"
  ],
  "title_cleanup_patterns": [
    "- Claude Code Docs",
    "| Claude Code Docs",
    "â€” Claude Code Docs"
  ],
  "status_code_filter": [
    404, 503, 502, 504, 403, 401, 500
  ],
  "mode": 2,
  "force_scan": 0,
  "results_dir": "results",
  "doc_dir": "md_docs",
  "doc_name": null,
  "doc_version": "latest",
  "toc_url_filters": {
    "subdomains": ["docs.", "api."],
    "fuzzy_match": ["/docs/", "/api/"],
    "exclude_fuzzy": ["/blog/", "/news/"]
  },
  "doc_max_depth": 10,
  "doc_timeout": 30,
  "doc_toc_selector": ".bd-toc-nav.page-toc",
  "toc_filter": {
    "merge_mode": "extend",
    "toc_class_patterns": ["custom-toc"],
    "toc_link_class_patterns": ["custom-toc-item"],
    "toc_parent_class_patterns": ["custom-menu-item"],
    "content_area_patterns": ["custom-content-area"],
    "non_toc_link_patterns": ["custom-exclude-link"],
    "toc_end_markers": ["See also", "Next steps"]
  },
  "content_filter": {
    "merge_mode": "extend",
    "documentation_preset": null,
    "non_content_selectors": [".custom-sidebar"],
    "fuzzy_keywords": ["custommenu"],
    "log_levels": ["TRACE:", "VERBOSE:"],
    "meaningless_content": ["Custom skip text"],
    "content_end_markers": ["Next steps"],
    "content_preserve_selectors": ["aside"],
    "code_container_selectors": []
  },
  "tool": {
    "markdown_extractor": {
      "default_search_mode": "exact",
      "case_sensitive": false,
      "max_results": 10,
      "fuzzy_threshold": 0.6,
      "enable_fallback": false,
      "fallback_modes": ["case_insensitive", "partial", "fuzzy"],
      "compress_threshold": 2000,
      "enable_compression": false
    }
  },
  "output_log_file": "results/output.out",
  "debug_log_file": "results/debug.log",
  "log_max_lines": 10000,
  "enable_inline_extraction": 1
}
```

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•é€‰æ‹©åˆé€‚çš„ `url_scope_mode`ï¼Ÿ

**A**ï¼š
- å¸¸è§„æ‰«æï¼šä½¿ç”¨ `0`ï¼ˆä¸»åŸŸåæ¨¡å¼ï¼‰
- éœ€è¦å‘ç°å¤–éƒ¨é“¾æ¥ï¼šä½¿ç”¨ `1`ï¼ˆå¤–éƒ¨ä¸€æ¬¡æ¨¡å¼ï¼‰
- å…¨ç«™æ·±åº¦æ‰«æï¼šä½¿ç”¨ `2`ï¼ˆæ— é™åˆ¶æ¨¡å¼ï¼‰
- ç²¾ç¡®ç›®æ ‡æ‰«æï¼šä½¿ç”¨ `3`ï¼ˆç™½åå•æ¨¡å¼ï¼‰

### Q2: `doc_toc_selector` ä»€ä¹ˆæ—¶å€™éœ€è¦é…ç½®ï¼Ÿ

**A**ï¼š
- Claude Code Docsã€Ray Docsï¼šä½¿ç”¨ `null`ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
- å…¶ä»–æ–‡æ¡£ç«™ç‚¹ï¼šå…ˆå°è¯• `null`ï¼Œå¦‚æœæå–æ•ˆæœä¸å¥½ï¼Œå†é…ç½®CSSé€‰æ‹©å™¨

### Q3: å¦‚ä½•é¿å…è¢«å°ç¦ï¼Ÿ

**A**ï¼š
- è®¾ç½®åˆç†çš„ `delay`ï¼ˆå»ºè®® 1-3 ç§’ï¼‰
- é™ä½ `max_workers`ï¼ˆå»ºè®® 10-20ï¼‰
- é…ç½® `proxy` ä½¿ç”¨ä»£ç†
- è®¾ç½® `User-Agent` æ¨¡æ‹ŸçœŸå®æµè§ˆå™¨

### Q4: å¤šä¸ªclasså¦‚ä½•ç²¾ç¡®åŒ¹é…ï¼Ÿ

**A**ï¼š
- âœ… æ­£ç¡®ï¼š`.bd-toc-nav.page-toc`ï¼ˆæ— ç©ºæ ¼ï¼ŒANDé€»è¾‘ï¼‰
- âŒ é”™è¯¯ï¼š`.bd-toc-nav, .page-toc`ï¼ˆé€—å·åˆ†éš”ï¼ŒORé€»è¾‘ï¼Œå¯èƒ½å†—ä½™ï¼‰

---

## å‘½ä»¤è¡Œå‚æ•°å¿«é€Ÿå‚è€ƒ

```bash
# åŸºç¡€æ‰«æ
python -m doc4llm -u https://example.com

# æ‰¹é‡æ‰«æ
python -m doc4llm -f urls.txt

# ä½¿ç”¨ä»£ç†
python -m doc4llm -u https://example.com -proxy http://127.0.0.1:7890

# è°ƒæ•´çº¿ç¨‹å’Œå»¶è¿Ÿ
python -m doc4llm -u https://example.com -workers 20 -delay 1

# è®¾ç½®æ·±åº¦
python -m doc4llm -u https://example.com -depth 3

# æ–‡æ¡£çˆ¬å–æ¨¡å¼
python -m doc4llm -u https://docs.example.com -mode 2

# å¼ºåˆ¶åˆ·æ–°CSVæ–‡ä»¶ï¼ˆmode 1/2ï¼‰
python -m doc4llm -u https://docs.example.com -mode 2 -force-scan 1

# æŒ‡å®šTOCé€‰æ‹©å™¨
python -m doc4llm -csv urls.csv -mode 2 -doc-toc-selector ".toc"

# è°ƒè¯•æ¨¡å¼
python -m doc4llm -u https://example.com -debug 1

# URLèŒƒå›´æ¨¡å¼
python -m doc4llm -u https://example.com -scope 3
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.6
**æ›´æ–°æ—¥æœŸ**: 2026-01-30
**é¡¹ç›®**: doc4llm

## æ›´æ–°æ—¥å¿—

### v1.6 (2026-01-30)
- å®Œå–„ `max_depth` å‚æ•°è¯´æ˜ï¼Œæ–°å¢é€’å½’æ·±åº¦è¡Œä¸ºè¡¨å’Œæ·±åº¦è®¡æ•°ç¤ºä¾‹
- è¡¥å…… `max_depth=0`ï¼ˆå•é¡µé¢ï¼‰å’Œ `max_depth=1`ï¼ˆä»…æå–é“¾æ¥ï¼‰çš„è¡Œä¸ºè¯´æ˜

### v1.5 (2026-01-23)
- æ–°å¢ `smart_concatenation` é…ç½®å‚æ•°ï¼ˆæ™ºèƒ½URLæ‹¼æ¥åŠŸèƒ½ï¼‰
- æ–°å¢ `log_max_lines` é…ç½®å‚æ•°ï¼ˆæ—¥å¿—æ–‡ä»¶è½®è½¬è¡Œæ•°ï¼‰
- æ–°å¢ `allowed_api_list` é…ç½®å‚æ•°ï¼ˆç™½åå•APIç«¯ç‚¹ï¼‰
- æ–°å¢ `is_duplicate` é…ç½®å‚æ•°ï¼ˆé‡å¤URLå¤„ç†ï¼‰
- æ–°å¢ `title_cleanup_patterns` é…ç½®å‚æ•°ï¼ˆæ ‡é¢˜æ¸…ç†æ¨¡å¼ï¼‰
- æ–°å¢"å†…å®¹è¿‡æ»¤é…ç½®"ç« èŠ‚ï¼ˆå®Œæ•´çš„ `content_filter` é…ç½®è¯´æ˜ï¼‰
- æ–°å¢"å·¥å…·é…ç½®"ç« èŠ‚ï¼ˆå®Œæ•´çš„ `tool.markdown_extractor` é…ç½®è¯´æ˜ï¼‰
- æ›´æ–°å®Œæ•´é…ç½®ç¤ºä¾‹ï¼ŒåŒ…å«æ‰€æœ‰æ–°å¢å‚æ•°

### v1.4 (2026-01-16)
- æ–°å¢ `enable_inline_extraction` é…ç½®å‚æ•°ï¼ˆmode 1/2/3 æ—¶çš„å†…è”æå–ä¼˜åŒ–ï¼‰
- æ–°å¢ `ContentExtractor` æ¨¡å—ï¼ˆæ‰«æè¿‡ç¨‹ä¸­å®æ—¶æå–å†…å®¹/TOCï¼‰
- mode 3 æ–°å¢ç»„åˆæ¨¡å¼ï¼ˆä¾æ¬¡æ‰§è¡Œæ–‡æ¡£å†…å®¹çˆ¬å–å’Œé”šç‚¹é“¾æ¥æå–ï¼‰
- ä¼˜åŒ– HTTP è¯·æ±‚æ¬¡æ•°ï¼Œmode 3 æ€§èƒ½æå‡çº¦ 66%
- æ”¯æŒå‘åå…¼å®¹ï¼Œç¦ç”¨å†…è”æå–å¯å›é€€åˆ°ä¼ ç»Ÿçˆ¬è™«æµç¨‹

### v1.3 (2026-01-16)
- å°† `headers` é…ç½®å‚æ•°æ›´æ”¹ä¸º `headers_path`ï¼ˆæŒ‡å‘ JSON æ ¼å¼çš„ headers æ–‡ä»¶ï¼‰
- åˆ é™¤ `headers.txt` æ–‡ä»¶ï¼Œç»Ÿä¸€ä½¿ç”¨ `headers.json` æ ¼å¼
- æ”¯æŒè‡ªå®šä¹‰ headers æ–‡ä»¶è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼‰

### v1.2 (2026-01-16)
- æ–°å¢ `toc_filter` é…ç½®å‚æ•°ï¼ˆç®¡ç† DocUrlCrawler æ¨¡å—çš„é¢„å®šä¹‰æ ‡ç­¾è¿‡æ»¤è§„åˆ™ï¼‰
- å°† `DocUrlCrawler.py` çš„é¢„å®šä¹‰é…ç½®æ•´åˆåˆ° `filter/config.py` ç»Ÿä¸€é…ç½®æ¨¡å—
- æ”¯æŒ `extend` å’Œ `replace` ä¸¤ç§åˆå¹¶æ¨¡å¼
- æ–°å¢ `TocFilterConfigLoader` å·¥å…·ç±»ç”¨äºä» config.json åŠ è½½é…ç½®
- æ›´æ–° `filter` åŒ…å¯¼å‡ºï¼Œæ–°å¢ TOC URL è¿‡æ»¤ç›¸å…³å¸¸é‡å’Œå·¥å…·ç±»
- `filter` åŒ…ç‰ˆæœ¬æ›´æ–°è‡³ v2.1.0

### v1.1 (2026-01-16)
- åˆ é™¤ `filter_404` å‚æ•°ï¼ˆå·²è¢« `status_code_filter` æ›¿ä»£ï¼‰
- æ–°å¢ `force_scan` å‚æ•°ï¼ˆmode 1/2æ—¶æ§åˆ¶æ˜¯å¦å¼ºåˆ¶åˆ·æ–°CSVï¼‰
- æ–°å¢ `results_dir` å‚æ•°ï¼ˆç»“æœæ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œæ”¯æŒåŠ¨æ€æ–‡ä»¶åï¼‰
- æ–°å¢ `output_log_file` å‚æ•°ï¼ˆæ§åˆ¶å°è¾“å‡ºæ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼‰
- æ–°å¢ `debug_log_file` å‚æ•°ï¼ˆè°ƒè¯•æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼‰
- æ–°å¢ `-config` å‘½ä»¤è¡Œå‚æ•°ï¼ˆè‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„ï¼‰
- æ–°å¢ `-force-scan` å‘½ä»¤è¡Œå‚æ•°ï¼ˆå¼ºåˆ¶æ‰«æåˆ·æ–°CSVï¼‰
